<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- creator-clang-static-analyzer.qdoc -->
  <title>Using Clang Tools | Qt Creator Manual</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="index.html">Qt Creator Manual</a></li>
<li>Using Clang Tools</li>
<li id="buildversion"><a href="index.html">Qt Creator Manual 6.0&#x2e;0</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
  <link rel="prev" href="creator-running-valgrind-remotely.html" />
  <link rel="next" href="creator-heob.html" />
<p class="naviNextPrevious headerNavi">
<a class="prevPage" href="creator-running-valgrind-remotely.html">Running Valgrind Tools on External Applications</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="creator-heob.html">Detecting Memory Leaks with Heob</a>
</p>
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#running-clang-tools">Running Clang Tools</a></li>
<li class="level1"><a href="#configuring-clang-tools">Configuring Clang Tools</a></li>
<li class="level2"><a href="#selecting-clazy-check-levels">Selecting Clazy Check Levels</a></li>
<li class="level2"><a href="#creating-clang-tidy-configuration-files">Creating Clang-Tidy Configuration Files</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Using Clang Tools</h1>
<!-- $$$creator-clang-tools.html-description -->
<div class="descr" id="details">
<p>Qt Creator integrates the following Clang tools for finding problems in C, C++, and Objective-C source code by using static analysis:</p>
<ul>
<li><a href="https://clang.llvm.org/extra/clang-tidy/">Clang-Tidy</a>, which provides diagnostics and fixes for typical programming errors, such as style violations or interface misuse.</li>
<li><a href="https://github.com/KDE/clazy/blob/master/README.md">Clazy</a>, which helps Clang understand Qt semantics. It displays Qt related compiler warnings, ranging from unnecessary memory allocation to misuse of API and provides refactoring actions for fixing some of the issues.</li>
</ul>
<p><b>Note: </b>The Clang static analyzer checks are a part of Clang-Tidy. To use the checks you must create a custom configuration for the Clang tools and enable them for Clang-Tidy.</p>
<p>Clang tools are delivered and installed with Qt Creator, and therefore you do not need to set them up separately.</p>
<p>In addition to running the tools to collect diagnostics, you can select <img src="images/open.png" alt="" /> to load diagnostics from <a href="https://yaml.org/">YAML</a> files that you exported using the <code>-export fixes</code> option.</p>
<h2 id="running-clang-tools">Running Clang Tools</h2>
<p>To run the Clang tools to analyze the currently open file:</p>
<ul>
<li>Select the <img src="images/debugger_singleinstructionmode.png" alt="" /> (<b>Analyze File</b>) button on the editor toolbar.</li>
<li>Select <b>Tools</b> &gt; <b>C++</b> &gt; <b>Analyze Current File</b>.</li>
</ul>
<p>To run the Clang tools to analyze an open project:</p>
<ol class="1" type="1"><li>Select <b>Analyze</b> &gt; <b>Clang-Tidy and Clazy</b>.<p class="centerAlign"><img src="images/qtcreator-files-to-analyze.png" alt="&quot;Files to Analyze dialog&quot;" /></p></li>
<li>Select the files to apply the checks to.</li>
<li>Select <b>Analyze</b> to start the checks.</li>
</ol>
<p>The found issues are displayed in the <b>Clang-Tidy and Clazy</b> view:</p>
<p class="centerAlign"><img src="images/qtcreator-clang-tools.png" alt="&quot;Clang-Tidy and Clazy view&quot;" /></p><p><b>Note: </b>If you select <b>Debug</b> in the mode selector to open the <b>Debug</b> mode and then select <b>Clang-Tidy and Clazy</b>, you must select the <img src="images/qtcreator-analyze-start-button.png" alt="" /> (<b>Start</b>) button to open the <b>Files to Analyze</b> dialog.</p>
<p>Double-click an issue to move to the location where the issue appears in the code editor.</p>
<p>If a fixit exists for an issue, you can select the check box next to the issue to schedule it for fixing. Select the <b>Select Fixits</b> check box to select all fixits. You can see the status of an issue by hovering the mouse pointer over the icon next to the check box.</p>
<p>To see more information about an issue that is marked with the <img src="images/refactormarker.png" alt="" /> icon, hover the mouse pointer over the line.</p>
<p>You can disable particular type of checks either globally or for a particular project by selecting <b>Disable This Check</b> or <b>Disable These Checks</b> in the context menu.</p>
<p>Select the <img src="images/settings.png" alt="" /> button to customize Clang diagnostics for the current project.</p>
<p class="centerAlign"><img src="images/qtcreator-clang-tools-options-customized.png" alt="&quot;Clang Tools customized settings&quot;" /></p><p>To restore the global settings, select <b>Restore Global Settings</b>. To view and modify the global settings, select <b>Open Global Settings</b>. To open the Clang static analyzer, select <b>Go to Analyzer</b>.</p>
<h2 id="configuring-clang-tools">Configuring Clang Tools</h2>
<p>To configure Clang diagnostics globally for Clang tools:</p>
<ol class="1" type="1"><li>Select <b>Tools</b> &gt; <b>Options</b> &gt; <b>Analyzer</b> &gt; <b>Clang Tools</b>.<p class="centerAlign"><img src="images/qtcreator-clang-tools-options.png" alt="&quot;Clang Tools options tab&quot;" /></p></li>
<li>In the <b>Clang-Tidy</b> and <b>Clazy-Standalone</b> fields, set the paths to the executables to use.</li>
<li>To build the project before running the Clang tools, select the <b>Build the project before analysis</b> check box. The Clang tools do not require the project to be built before analysis, but they might display misleading warnings about files missing that are generated during the build. For big projects, not building the project might save some time.</li>
<li>To disable automatic analysis of open documents, deselect the <b>Analyze open files</b> check box.</li>
<li>In the <b>Parallel jobs</b> field, select the number of jobs to run in parallel to make the analysis faster on multi-core processors.</li>
<li>In the <b>Diagnostic Configuration</b> group, select <b>Manage</b> to create or edit a custom configuration.</li>
<li>Select <b>Copy</b> to create a custom Clang configuration.<p class="centerAlign"><img src="images/qtcreator-clang-copy-diagnostic-configuration.png" alt="&quot;Copy Diagnostic Configuration dialog&quot;" /></p></li>
<li>In the <b>Diagnostic configuration name</b> field, give the configuration a name, and then select <b>OK</b>.</li>
<li>In the <b>Clang Warnings</b> tab, select the <b>Use diagnostic flags from the build system</b> check box to forward diagnostic flags, such as warning flags, from the build system to the Clang code model for displaying annotations in the code editor.<p class="centerAlign"><img src="images/qtcreator-clang-tools-diagnostics-configuration.png" alt="&quot;Diagnostics Configuration dialog&quot;" /></p></li>
<li>In the <b>Clang-Tidy Checks</b> tab, select <b>Select Checks</b> to select the checks to perform.<p class="centerAlign"><img src="images/qtcreator-clang-tidy.png" alt="&quot;Clang-Tidy Checks tab&quot;" /></p><p>For more information about the available checkers, see <a href="https://clang-analyzer.llvm.org/available_checks.html">Clang Static Analyzer documentation</a>.</p>
</li>
<li>To edit the selected check as plain text, select <b>Edit Checks as String</b>.</li>
<li>In the <b>Clazy Checks</b> tab, select the level of Clazy checks to perform.<p class="centerAlign"><img src="images/qtcreator-clazy.png" alt="&quot;Clazy Checks tab&quot;" /></p></li>
<li>In the <b>Topic Filter</b> field, select a topic to view only checks related to that area in the <b>Checks</b> field.</li>
<li>To view all checks again, select <b>Reset Filter</b>.</li>
<li>To view more information about the checks online, select the <b>Web Page</b> links next to them.</li>
</ol>
<p>To suppress diagnostics, select <b>Suppress This Diagnostic</b> in the context menu. To view the suppression list for a project and to remove diagnostics from it, select <b>Projects</b> &gt; <b>Project Settings</b> &gt; <b>Clang Tools</b>.</p>
<h3 id="selecting-clazy-check-levels">Selecting Clazy Check Levels</h3>
<p>The Clazy checks are divided into levels from 0 to 3. The checks at level 0 are very stable and provide hardly any false positives, while the checks at level 3 can be considered experimental. You can select the checks to perform at each level. To include the checks from the lower levels automatically, select the <b>Enable lower levels automatically</b> check box.</p>
<h3 id="creating-clang-tidy-configuration-files">Creating Clang-Tidy Configuration Files</h3>
<p>Clang-Tidy reads the configuration for each source file from a .clang-tidy file located in the closest parent directory of the source file. If any configuration options have a corresponding command-line option, the command-line option takes precedence. The effective configuration can be inspected using <code>-dump-config</code>.</p>
<p>Qt Creator creates the configuration for you based on the checks you select. To store the checks in file format, you can create a .clang-tidy file, as follows:</p>
<ol class="1" type="1"><li>Select <b>Edit Checks as String</b> and copy the contents of the field.</li>
<li>Pipe the output of <code>clang-tidy -dump-config</code> into a file named <code>.clang-tidy</code>. For example: <code>clang-tidy -checks=-*,bugprone-*,cppcoreguidelines-avoid-* -dump-config &gt; .clang-tidy</code></li>
<li>Move the .clang-tidy file to the parent directory of the sources.</li>
</ol>
<p>To add more checks using Qt Creator later on, copy the checks from your .clang-tidy file into the <b>Edit Checks as String</b> field, select additional checks, and copy-paste the contents of the field to the .clang-tidy file.</p>
</div>
<!-- @@@creator-clang-tools.html -->
<p class="naviNextPrevious footerNavi">
<a class="prevPage" href="creator-running-valgrind-remotely.html">Running Valgrind Tools on External Applications</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="creator-heob.html">Detecting Memory Leaks with Heob</a>
</p>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2021 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
